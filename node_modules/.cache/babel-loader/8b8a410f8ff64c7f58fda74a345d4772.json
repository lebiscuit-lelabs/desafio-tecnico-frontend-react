{"ast":null,"code":"import { call, put, all, takeLatest } from \"redux-saga/effects\";\nimport api from \"../../../services/baseUrl\";\nimport { loadDataSuccess, loadDataFailure, getCharacterByHouseSuccess, getCharacterByNameSuccess, getCharacterByNameFailure } from \"./actions\";\nimport ActionsData from \"./const\";\n\nfunction* loadData() {\n  const characters = yield all([call(api.get, \"/show/characters/bySlug/Daenerys_Targaryen\"), call(api.get, \"/show/characters/bySlug/Jon_Snow\"), call(api.get, \"/show/characters/bySlug/Eddard_Stark\"), call(api.get, \"/show/characters/bySlug/Tyrion_Lannister\"), call(api.get, \"/show/characters/bySlug/Ramsay_Bolton\"), call(api.get, \"/show/characters/bySlug/Sansa_Stark\"), call(api.get, \"/show/characters/bySlug/Cersei_Lannister\"), call(api.get, \"/show/characters/bySlug/Joffrey_Baratheon\")]);\n  let dataCharacters = [];\n\n  for (var i = 0; i < 8; i++) {\n    dataCharacters.push(characters[i].data);\n  }\n\n  const houses = yield all([call(api.get, \"/show/houses/House Targaryen\"), call(api.get, \"/show/houses/House Stark\"), call(api.get, \"/show/houses/House Lannister\"), call(api.get, \"/show/houses/House Martell\"), call(api.get, \"/show/houses/House Baratheon\"), call(api.get, \"/show/houses/House Tyrell\")]);\n  let dataHouses = [];\n\n  for (var y = 0; y < 6; y++) {\n    dataHouses.push(...houses[y].data);\n  }\n\n  const data = {\n    dataCharacters,\n    dataHouses\n  };\n\n  if (dataCharacters && dataHouses) {\n    yield put(loadDataSuccess(data));\n  } else {\n    yield put(loadDataFailure());\n  }\n}\n\nfunction* getDataByHouse(payload) {\n  const {\n    params\n  } = payload;\n  const charactersByHouse = yield call(api.get, `show/characters/byHouse/${params}`);\n  const {\n    data,\n    status\n  } = charactersByHouse;\n\n  if (status) {\n    yield put(getCharacterByHouseSuccess(data));\n  }\n}\n\nfunction* getDataByName(payload) {\n  try {\n    const {\n      params\n    } = payload;\n    const charactersByName = yield call(api.get, `/show/characters/${params}`);\n    const {\n      data\n    } = charactersByName;\n    yield put(getCharacterByNameSuccess([data]));\n  } catch (error) {\n    yield put(getCharacterByNameFailure(error));\n  }\n}\n\nexport default all([takeLatest(ActionsData.REQUEST, loadData), takeLatest(ActionsData.GET_CHARACTER_BY_HOUSE, getDataByHouse), takeLatest(ActionsData.GET_CHARACTER_BY_NAME, getDataByName)]);","map":{"version":3,"sources":["/home/tiago.almeida/Documents/www/Github/desafio-tecnico-frontend-react/src/store/modules/data/sagas.js"],"names":["call","put","all","takeLatest","api","loadDataSuccess","loadDataFailure","getCharacterByHouseSuccess","getCharacterByNameSuccess","getCharacterByNameFailure","ActionsData","loadData","characters","get","dataCharacters","i","push","data","houses","dataHouses","y","getDataByHouse","payload","params","charactersByHouse","status","getDataByName","charactersByName","error","REQUEST","GET_CHARACTER_BY_HOUSE","GET_CHARACTER_BY_NAME"],"mappings":"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","sourcesContent":["import { call, put, all, takeLatest } from \"redux-saga/effects\";\nimport api from \"../../../services/baseUrl\";\nimport {\n  loadDataSuccess,\n  loadDataFailure,\n  getCharacterByHouseSuccess,\n  getCharacterByNameSuccess,\n  getCharacterByNameFailure,\n} from \"./actions\";\nimport ActionsData from \"./const\";\n\nfunction* loadData() {\n  const characters = yield all([\n    call(api.get, \"/show/characters/bySlug/Daenerys_Targaryen\"),\n    call(api.get, \"/show/characters/bySlug/Jon_Snow\"),\n    call(api.get, \"/show/characters/bySlug/Eddard_Stark\"),\n    call(api.get, \"/show/characters/bySlug/Tyrion_Lannister\"),\n    call(api.get, \"/show/characters/bySlug/Ramsay_Bolton\"),\n    call(api.get, \"/show/characters/bySlug/Sansa_Stark\"),\n    call(api.get, \"/show/characters/bySlug/Cersei_Lannister\"),\n    call(api.get, \"/show/characters/bySlug/Joffrey_Baratheon\"),\n  ]);\n\n  let dataCharacters = [];\n  for (var i = 0; i < 8; i++) {\n    dataCharacters.push(characters[i].data);\n  }\n\n  const houses = yield all([\n    call(api.get, \"/show/houses/House Targaryen\"),\n    call(api.get, \"/show/houses/House Stark\"),\n    call(api.get, \"/show/houses/House Lannister\"),\n    call(api.get, \"/show/houses/House Martell\"),\n    call(api.get, \"/show/houses/House Baratheon\"),\n    call(api.get, \"/show/houses/House Tyrell\"),\n  ]);\n\n  let dataHouses = [];\n  for (var y = 0; y < 6; y++) {\n    dataHouses.push(...houses[y].data);\n  }\n\n  const data = {\n    dataCharacters,\n    dataHouses,\n  };\n\n  if (dataCharacters && dataHouses) {\n    yield put(loadDataSuccess(data));\n  } else {\n    yield put(loadDataFailure());\n  }\n}\n\nfunction* getDataByHouse(payload) {\n  const { params } = payload;\n\n  const charactersByHouse = yield call(\n    api.get,\n    `show/characters/byHouse/${params}`\n  );\n  const { data, status } = charactersByHouse;\n\n  if (status) {\n    yield put(getCharacterByHouseSuccess(data));\n  }\n}\n\nfunction* getDataByName(payload) {\n  try {\n    const { params } = payload;\n    const charactersByName = yield call(api.get, `/show/characters/${params}`);\n    const { data } = charactersByName;\n\n    yield put(getCharacterByNameSuccess([data]));\n  } catch (error) {\n    yield put(getCharacterByNameFailure(error));\n  }\n}\n\nexport default all([\n  takeLatest(ActionsData.REQUEST, loadData),\n  takeLatest(ActionsData.GET_CHARACTER_BY_HOUSE, getDataByHouse),\n  takeLatest(ActionsData.GET_CHARACTER_BY_NAME, getDataByName),\n]);\n"]},"metadata":{},"sourceType":"module"}